<p id="notice"><%= notice %></p>

<h1>Listing</h1>

<%= generate_table(
        striped: true,
        hover: true,
        data_table: true,
        header: ['Title'] + StockDatum::ATTRIBUTES.map(&:to_s) + [''],
        content: @stocks.map do |stock|
          data = stock.stock_data.last || StockDatum.new
          [link_to(stock.label, stock)] +
          StockDatum::ATTRIBUTES.map { |attribute| data.public_send(attribute) } +
          [link_to('Destroy', stock, method: :delete, data: { confirm: 'Are you sure?' })]
        end) %>

<%= link_to 'New', new_stock_path, class: 'btn btn-success' %>
